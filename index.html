<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cards Stacking with GSAP</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <!-- lenis -->
    <link rel="stylesheet" href="https://unpkg.com/lenis@1.3.8/dist/lenis.css">
    <style>
      * {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

body {
  background-color: #000;
  color: #fff;
  font-family: sans-serif;
  font-size: 1rem;
  line-height: 1.5;
  transition: color 0.3s, background-color 0.3s;
}

h2 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 2rem;
  font-weight: 700;
  line-height: 1.2;
  color: #fff;
}

.heading {
  font-size: 2.5rem;
  height: 50vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-shadow: 0.04em 0.04rem 0 #222;
  color: #fff;
}

.section {
  overflow: hidden;
}

.wrapper {
  height: 100vh;
}

.list {
  justify-content: flex-start;
  align-items: center;
  height: 100%;
  display: flex;
  position: relative;
  padding: 0.2rem;
}

.item {
  width: 100vw;
  height: 100%;
  display: flex;
  position: absolute;
  inset: 0%;
  box-shadow: rgb(30, 30, 30, 0.6) 0px 8px 24px;
  overflow: hidden;
  background-color: #111;
}

.item_number {
  font-size: 1.5rem;
  height: 3rem;
  width: 3rem;
  margin-bottom: 0.5rem;
  border-radius: 50%;
  background-color: #fff;
  color: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 400;
  position: absolute;
  top: 6rem;
  left: 3rem;
}

.item_content {
  background-color: #111;
  color: #fff;
  flex-flow: column;
  justify-content: center;
  align-items: flex-start;
  padding: 3rem;
  display: flex;
  position: relative;
  width: 50%;
}

.item_media {
  object-fit: cover;
  width: 50%;
  height: 100%;
}

.padding-global {
  padding-left: 2.5rem;
  padding-right: 2.5rem;
}

.padding-vertical {
  padding: 2rem;
}

.stack-spread-section .list,
.center-spread-section .list {
  justify-content: center;
}

.stack-spread-section .item,
.center-spread-section .item {
  position: absolute;
  top: 10vh;
  left: 5vw;
  width: 15vw;
  height: 80vh;
  display: flex;
  flex-direction: column;
  border-radius: 10px;
  background-color: #111;
  box-shadow: rgb(30, 30, 30, 0.6) 0px 8px 24px;
}

.stack-spread-section .item_content,
.center-spread-section .item_content {
  width: 100%;
  height: 50%;
  padding: 1rem;
  justify-content: flex-start;
  background-color: #111;
  color: #fff;
}

.stack-spread-section .item_content h2,
.center-spread-section .item_content h2 {
  font-size: 1.2rem;
  margin-bottom: 0.5rem;
  color: #fff;
}

.stack-spread-section .item_content .item_p,
.center-spread-section .item_content .item_p {
  font-size: 0.8rem;
  color: #ccc;
}

.stack-spread-section .item_media,
.center-spread-section .item_media {
  width: 100%;
  height: 50%;
}

.stack-spread-section .item_number,
.center-spread-section .item_number {
  top: 1rem;
  left: 1rem;
  width: 2rem;
  height: 2rem;
  font-size: 1rem;
  background-color: #fff;
  color: #000;
}

.zoom-image-section .wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
}

.zoom-image-container {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.zoom-image {
  width: 20vw;
  height: 20vh;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: rgb(30, 30, 30, 0.6) 0px 8px 24px;
}

@media (max-width: 575.98px) {
  .heading {
    font-size: 2.5rem;
    color: #fff;
  }

  .item {
    display: flex;
    flex-direction: column;
    background-color: #111;
  }

  .item_content,
  .item_media {
    height: 50vh;
    width: 100%;
    padding-top: 0;
    padding-bottom: 0;
    background-color: #111;
    color: #fff;
  }

  .item_number {
    font-size: .5rem;
    top: 1.5rem;
    background-color: #fff;
    color: #000;
  }

  .stack-spread-section .item,
  .center-spread-section .item {
    width: 60vw;
    height: 60vh;
    top: 20vh;
    background-color: #111;
  }

  .stack-spread-section .item_content h2,
  .center-spread-section .item_content h2 {
    font-size: 1rem;
    color: #fff;
  }

  .stack-spread-section .item_content .item_p,
  .center-spread-section .item_content .item_p {
    font-size: 0.7rem;
    color: #ccc;
  }

  .zoom-image {
    width: 40vw;
    height: 30vh;
    box-shadow: rgb(30, 30, 30, 0.6) 0px 8px 24px;
  }
}
    </style>
  </head>
  <body>
    <main class="main-wrapper">
      <div class="section">
        <div class="container-medium">
          <div class="padding-vertical">
            <div class="max-width-large">
              <h1 class="heading">But Vertical Scroll Is Also Cool!</h1>
            </div>
          </div>
        </div>
      </div>

      <div class="scroll-section vertical-section section">
        <div class="wrapper">
          <div role="list" class="list">
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">1</h2>
                <h2>Wildlife in Action: A Glimpse into Nature’s Daily Drama</h2>
                <p class="item_p">
                  Witness the fascinating lives of animals in their natural
                  habitats, from playful cubs to stealthy predators.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/4763824/4763824-uhd_2560_1440_24fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">2</h2>
                <h2>The Changing Seasons: Nature’s Everlasting Cycle</h2>
                <p class="item_p">
                  Experience the beauty of nature's transitions, from blooming
                  spring flowers to snowy winter landscapes.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/3214448/3214448-uhd_2560_1440_25fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">3</h2>
                <h2>Guardians of Nature: Protecting Our Planet’s Future</h2>
                <p class="item_p">
                  Learn about the importance of conservation and how we can work
                  together to preserve the beauty of nature for generations to
                  come.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/4328514/4328514-uhd_2560_1440_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">4</h2>
                <h2>Astral Aesthetics: Portraits from the Infinite</h2>
                <p class="item_p">
                  Experience the boundless beauty of the cosmos through striking
                  portraits that capture its infinite aesthetic appeal.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/2871916/2871916-hd_1920_1080_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="container-medium">
          <div class="padding-vertical">
            <div class="max-width-large">
              <h1 class="heading">Horizontal Scroll Is Cool!</h1>
            </div>
          </div>
        </div>
      </div>

      <div class="scroll-section horizontal-section section">
        <div class="wrapper">
          <div role="list" class="list">
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">1</h2>
                <h2>Wildlife in Action: A Glimpse into Nature’s Daily Drama</h2>
                <p class="item_p">
                  Explore the untouched beauty of forests, mountains, and rivers
                  as we uncover the hidden secrets of nature's most breathtaking
                  landscapes.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/10178127/10178127-uhd_2560_1440_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">2</h2>
                <h2>Nature’s Symphony: The Sounds That Heal the Soul</h2>
                <p class="item_p">
                  Immerse yourself in the soothing sounds of chirping birds,
                  rustling leaves, and flowing streams – nature's music for
                  peace and tranquility.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/15708463/15708463-uhd_2560_1440_24fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">3</h2>
                <h2>
                  Nature’s Masterpieces: Landscapes That Take Your Breath Away
                </h2>
                <p class="item_p">
                  Discover stunning views of majestic mountains, endless oceans,
                  and golden sunsets that remind us of nature's artistic
                  brilliance.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/15708462/15708462-uhd_2560_1440_24fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">4</h2>
                <h2>The Power of Nature: How It Shapes Our World</h2>
                <p class="item_p">
                  Dive into the incredible forces of nature – from roaring
                  waterfalls to mighty hurricanes – and see how they sculpt the
                  earth we live on.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/5788966/5788966-hd_1920_1080_25fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="container-medium">
          <div class="padding-vertical">
            <div class="max-width-large">
              <h1 class="heading">Stack and Spread Is Cool Too!</h1>
            </div>
          </div>
        </div>
      </div>

      <div class="scroll-section stack-spread-section section">
        <div class="wrapper">
          <div role="list" class="list">
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">1</h2>
                <h2>Wildlife Wonders</h2>
                <p class="item_p">
                  Discover the amazing behaviors of animals in the wild.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/4763824/4763824-uhd_2560_1440_24fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">2</h2>
                <h2>Seasonal Splendor</h2>
                <p class="item_p">
                  See how nature transforms through the seasons.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/3214448/3214448-uhd_2560_1440_25fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">3</h2>
                <h2>Conservation Efforts</h2>
                <p class="item_p">
                  Explore ways to protect our natural world.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/4328514/4328514-uhd_2560_1440_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">4</h2>
                <h2>Cosmic Beauty</h2>
                <p class="item_p">
                  Gaze at the wonders of the universe.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/2871916/2871916-hd_1920_1080_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">5</h2>
                <h2>Ocean Mysteries</h2>
                <p class="item_p">
                  Dive into the depths of the sea and its secrets.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/10178127/10178127-uhd_2560_1440_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="container-medium">
          <div class="padding-vertical">
            <div class="max-width-large">
              <h1 class="heading">Zooming Image Is Awesome!</h1>
            </div>
          </div>
        </div>
      </div>

      <div class="scroll-section zoom-image-section section">
        <div class="wrapper">
          <div class="zoom-image-container">
            <img
              src="https://images.pexels.com/photos/1624438/pexels-photo-1624438.jpeg"
              alt="Nature Landscape"
              class="zoom-image"
              loading="lazy"
            />
          </div>
        </div>
      </div>

      <div class="section">
        <div class="container-medium">
          <div class="padding-vertical">
            <div class="max-width-large">
              <h1 class="heading">Center Spread Is Super Cool!</h1>
            </div>
          </div>
        </div>
      </div>

      <div class="scroll-section center-spread-section section">
        <div class="wrapper">
          <div role="list" class="list">
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">1</h2>
                <h2>Wildlife Wonders</h2>
                <p class="item_p">
                  Discover the amazing behaviors of animals in the wild.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/4763824/4763824-uhd_2560_1440_24fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">2</h2>
                <h2>Seasonal Splendor</h2>
                <p class="item_p">
                  See how nature transforms through the seasons.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/3214448/3214448-uhd_2560_1440_25fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">3</h2>
                <h2>Conservation Efforts</h2>
                <p class="item_p">
                  Explore ways to protect our natural world.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/4328514/4328514-uhd_2560_1440_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">4</h2>
                <h2>Cosmic Beauty</h2>
                <p class="item_p">
                  Gaze at the wonders of the universe.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/2871916/2871916-hd_1920_1080_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
            <div role="listitem" class="item">
              <div class="item_content">
                <h2 class="item_number">5</h2>
                <h2>Ocean Mysteries</h2>
                <p class="item_p">
                  Dive into the depths of the sea and its secrets.
                </p>
              </div>
              <video
                src="https://videos.pexels.com/video-files/10178127/10178127-uhd_2560_1440_30fps.mp4"
                loading="lazy"
                autoplay
                muted
                loop
                class="item_media"
              ></video>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="padding-global">
          <div class="container-medium">
            <div class="padding-vertical">
              <div class="max-width-large">
                <h1 class="heading">Soo Cool!!</h1>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="main.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/YT-PixelPerfectLabs/Youtube-Floating-Button/dist/script.js"></script>
    <script src="https://unpkg.com/lenis@1.3.8/dist/lenis.min.js"></script>
<script>
  // Initialize Lenis with options
  const lenis = new Lenis({
    duration: 1.2,       
    smooth: true,        
    smoothTouch: false,  
  })

  // Animate with RAF
  function raf(time) {
    lenis.raf(time)
    requestAnimationFrame(raf)
  }

  requestAnimationFrame(raf)
</script>
<script>
  // Make ScrollTrigger available for use in GSAP animations
gsap.registerPlugin(ScrollTrigger);

// Select the HTML elements needed for the animation
const scrollSection = document.querySelectorAll(".scroll-section");

scrollSection.forEach((section) => {
  const wrapper = section.querySelector(".wrapper");
  const items = wrapper.querySelectorAll(".item");
  const zoomImage = section.querySelector(".zoom-image");

  // Initialize
  let direction = null;

  if (section.classList.contains("vertical-section")) {
    direction = "vertical";
  } else if (section.classList.contains("horizontal-section")) {
    direction = "horizontal";
  } else if (section.classList.contains("stack-spread-section")) {
    direction = "stack-spread";
  } else if (section.classList.contains("zoom-image-section")) {
    direction = "zoom-image";
  } else if (section.classList.contains("center-spread-section")) {
    direction = "center-spread";
  }

  if (direction === "stack-spread") {
    initStackSpread(section, items);
  } else if (direction === "zoom-image") {
    initZoomImage(section, zoomImage);
  } else if (direction === "center-spread") {
    initCenterSpread(section, items);
  } else {
    initScroll(section, items, direction);
  }
});

function initScroll(section, items, direction) {
  // Initial states
  items.forEach((item, index) => {
    if (index !== 0) {
      direction == "horizontal"
        ? gsap.set(item, { xPercent: 100 })
        : gsap.set(item, { yPercent: 100 });
    }
  });

  const timeline = gsap.timeline({
    scrollTrigger: {
      trigger: section,
      pin: true,
      start: "top top",
      end: () => `+=${items.length * 100}%`,
      scrub: 1,
      invalidateOnRefresh: true,
      // markers: true,
    },
    defaults: { ease: "none" },
  });
  items.forEach((item, index) => {
    timeline.to(item, {
      scale: 0.9,
      borderRadius: "10px",
    });

    direction == "horizontal"
      ? timeline.to(
          items[index + 1],
          {
            xPercent: 0,
          },
          "<"
        )
      : timeline.to(
          items[index + 1],
          {
            yPercent: 0,
          },
          "<"
        );
  });
}

function initStackSpread(section, items) {
  // Set initial stacked positions with slight offsets for stack effect
  items.forEach((item, index) => {
    gsap.set(item, {
      x: index * 5,
      y: index * 5,
      rotation: index % 2 === 0 ? -2 : 2,
      zIndex: items.length - index, // Last item on top
    });
  });

  // Create timeline for spreading animation
  const timeline = gsap.timeline({
    scrollTrigger: {
      trigger: section,
      pin: true,
      start: "top top",
      end: "+=100%",
      scrub: 1,
      invalidateOnRefresh: true,
      // markers: true,
    },
    defaults: { ease: "power1.inOut" },
  });

  // Calculate spread positions
  const cardWidth = 15; // vw
  const gap = 4; // vw
  const totalWidth = items.length * cardWidth + (items.length - 1) * gap;
  const startLeft = (100 - totalWidth) / 2;

  items.forEach((item, index) => {
    const targetLeft = startLeft + index * (cardWidth + gap);
    timeline.to(
      item,
      {
        left: `${targetLeft}vw`,
        x: 0,
        y: 0,
        rotation: 0,
        duration: 1,
      },
      0 // All animate simultaneously
    );
  });
}

function initZoomImage(section, zoomImage) {
  // Set initial state
  gsap.set(zoomImage, {
    scale: 1,
  });

  // Create timeline for zoom animation
  const timeline = gsap.timeline({
    scrollTrigger: {
      trigger: section,
      pin: true,
      start: "top top",
      end: "+=100%",
      scrub: 1,
      invalidateOnRefresh: true,
      // markers: true,
    },
    defaults: { ease: "power1.inOut" },
  });

  // Animate image to full screen
  timeline.to(zoomImage, {
    width: "100vw",
    height: "100vh",
    borderRadius: 0,
    duration: 1,
  });
}

function initCenterSpread(section, items) {
  // Set initial centered positions
  const centerX = 50; // Center of viewport in vw
  items.forEach((item, index) => {
    gsap.set(item, {
      left: `${centerX - 7.5}vw`, // Center cards (half card width)
      x: 0,
      y: 0,
      rotation: 0,
      zIndex: items.length - index, // Last item on top
    });
  });

  // Create timeline for spreading animation
  const timeline = gsap.timeline({
    scrollTrigger: {
      trigger: section,
      pin: true,
      start: "top top",
      end: "+=100%",
      scrub: 1,
      invalidateOnRefresh: true,
      // markers: true,
    },
    defaults: { ease: "power1.inOut" },
  });

  // Calculate spread positions
  const cardWidth = 15; // vw
  const gap = 4; // vw
  const totalWidth = items.length * cardWidth + (items.length - 1) * gap;
  const startLeft = (100 - totalWidth) / 2;

  items.forEach((item, index) => {
    const targetLeft = startLeft + index * (cardWidth + gap);
    timeline.to(
      item,
      {
        left: `${targetLeft}vw`,
        duration: 1,
      },
      0 // All animate simultaneously
    );
  });
}
</script>

  </body>
</html>